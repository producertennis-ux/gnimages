<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bulk Image Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; }
    .dropzone-active { border-color: #2563eb; background-color: #eff6ff; }
    .swatch { transition: transform 0.1s ease-in-out; }
    .swatch:hover { transform: scale(1.1); }
    .form-radio {
      -webkit-appearance: none; appearance: none;
      background-color: #fff; margin: 0; font: inherit; color: currentColor;
      width: 1.15em; height: 1.15em; border: 0.15em solid currentColor;
      border-radius: 50%; transform: translateY(-0.075em);
      display: grid; place-content: center;
    }
    .form-radio::before {
      content: ""; width: 0.65em; height: 0.65em; border-radius: 50%;
      transform: scale(0); transition: 120ms transform ease-in-out;
      box-shadow: inset 1em 1em #2563eb;
    }
    .form-radio:checked::before { transform: scale(1); }
    input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
    input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.25rem; }
  </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">
  <div class="w-full max-w-5xl bg-white rounded-xl shadow-lg p-6 md:p-8">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-slate-800">Bulk Image Generator</h1>
      <p class="text-slate-500 mt-2">Design a background, optionally add a logo, and generate JPGs in one click.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
      <div class="flex flex-col gap-8">
        <div class="flex flex-col">
          <label class="font-semibold text-slate-700 mb-2">Upload Your Logo (Optional)</label>
          <div id="dropzone" class="relative flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-slate-300 rounded-lg cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors">
            <div id="dropzone-prompt" class="flex flex-col items-center justify-center pt-5 pb-6 text-center">
              <svg class="w-8 h-8 mb-4 text-slate-500" fill="none" viewBox="0 0 20 16">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
              </svg>
              <p class="mb-2 text-sm text-slate-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
              <p class="text-xs text-slate-500">PNG, JPG, SVG, or WEBP</p>
            </div>
            <img id="logo-preview" class="hidden absolute h-full w-full object-contain p-4" />
            <input id="file-upload" type="file" class="hidden" accept="image/*" />
          </div>
          <div id="file-error" class="text-red-500 text-sm mt-2 hidden"></div>
        </div>

        <div>
          <label class="font-semibold text-slate-700 mb-3 block">Overlay (Optional)</label>
          <div class="flex items-center gap-6">
            <label><input type="radio" name="overlay-logo" value="none" checked class="form-radio"><span class="ml-2 text-sm">None</span></label>
            <label><input type="radio" name="overlay-logo" value="atp" class="form-radio"><span class="ml-2 text-sm">ATP</span></label>
            <label><input type="radio" name="overlay-logo" value="wta" class="form-radio"><span class="ml-2 text-sm">WTA</span></label>
          </div>
        </div>
      </div>

      <div class="flex flex-col">
        <label class="font-semibold text-slate-700 mb-2">Background</label>
        <div class="flex items-center gap-6 mb-4">
          <label><input type="radio" name="bg-type" value="solid" checked class="form-radio"><span class="ml-2 text-sm">Solid</span></label>
          <label><input type="radio" name="bg-type" value="diagonal" class="form-radio"><span class="ml-2 text-sm">Diagonal</span></label>
          <label><input type="radio" name="bg-type" value="image" class="form-radio"><span class="ml-2 text-sm">Image</span></label>
        </div>

        <div class="mt-4">
          <label class="text-sm text-slate-600 mb-1 block">Color:</label>
          <input type="color" id="color-picker-1" value="#000000" class="h-10 w-12 border border-slate-300 rounded-md" />
        </div>
      </div>
    </div>

    <div class="mt-8 text-center">
      <button id="generate-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-all">Generate Images</button>
    </div>

    <div id="output-section" class="mt-10 hidden">
      <div class="flex justify-between items-center mb-4 border-t pt-6">
        <h2 class="text-2xl font-bold text-slate-800">Your Images</h2>
        <button id="download-all-btn" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 transition-all">Download All (.zip)</button>
      </div>
      <div id="image-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      <div id="loading-spinner" class="text-center p-8 hidden">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
        <p class="mt-4 text-slate-600">Generating your images...</p>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const dropzone = document.getElementById('dropzone');
      const fileUpload = document.getElementById('file-upload');
      const logoPreview = document.getElementById('logo-preview');
      const dropzonePrompt = document.getElementById('dropzone-prompt');
      const fileError = document.getElementById('file-error');
      const generateBtn = document.getElementById('generate-btn');
      const imageGrid = document.getElementById('image-grid');
      const downloadAllBtn = document.getElementById('download-all-btn');
      const outputSection = document.getElementById('output-section');
      const loadingSpinner = document.getElementById('loading-spinner');
      const colorPicker1 = document.getElementById('color-picker-1');

      let uploadedLogo = null;
      const SIZES = [
        { width: 3000, height: 3000 },
        { width: 4096, height: 2048 },
        { width: 1920, height: 2880 },
      ];

      const atpLogo = new Image(); atpLogo.crossOrigin = "Anonymous"; atpLogo.src = 'https://i.imgur.com/A2bnkF3.png';
      const wtaLogo = new Image(); wtaLogo.crossOrigin = "Anonymous"; wtaLogo.src = 'https://i.imgur.com/4FCZJdT.png';
      const overlayLogos = { atp: atpLogo, wta: wtaLogo };

      dropzone.addEventListener('click', () => fileUpload.click());
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => dropzone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); }));
      dropzone.addEventListener('drop', e => handleFile(e.dataTransfer.files[0]));
      fileUpload.addEventListener('change', e => handleFile(e.target.files[0]));

      function handleFile(file) {
        fileError.classList.add('hidden');
        if (!file || !file.type.startsWith('image/')) {
          fileError.textContent = 'Please select a valid image.';
          fileError.classList.remove('hidden'); return;
        }
        const reader = new FileReader();
        reader.onload = e => {
          uploadedLogo = new Image();
          uploadedLogo.onload = () => {
            logoPreview.src = e.target.result;
            logoPreview.classList.remove('hidden');
            dropzonePrompt.classList.add('hidden');
          };
          uploadedLogo.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }

      generateBtn.addEventListener('click', async () => {
        imageGrid.innerHTML = '';
        outputSection.classList.remove('hidden');
        loadingSpinner.classList.remove('hidden');
        generateBtn.disabled = true;
        generateBtn.textContent = 'Generating...';
        await new Promise(r => setTimeout(r, 50));

        const bgType = document.querySelector('input[name="bg-type"]:checked').value;
        const color1 = colorPicker1.value;
        const selectedOverlay = document.querySelector('input[name="overlay-logo"]:checked').value;
        const overlayImage = overlayLogos[selectedOverlay];
        const generatedImages = [];

        for (const size of SIZES) {
          const canvas = document.createElement('canvas');
          canvas.width = size.width;
          canvas.height = size.height;
          const ctx = canvas.getContext('2d');
          ctx.imageSmoothingEnabled = true;
          ctx.imageSmoothingQuality = 'high';

          if (bgType === 'solid') {
            ctx.fillStyle = color1;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
          }

          if (uploadedLogo) {
            const maxDim = Math.min(canvas.width, canvas.height) * 0.7;
            const aspect = uploadedLogo.width / uploadedLogo.height;
            let logoW = maxDim, logoH = maxDim;
            if (aspect > 1) logoH = logoW / aspect; else logoW = logoH * aspect;
            ctx.drawImage(uploadedLogo, (canvas.width - logoW) / 2, (canvas.height - logoH) / 2, logoW, logoH);

            if (overlayImage && overlayImage.complete) {
              const ow = logoW * 0.36;
              const oh = (ow / overlayImage.width) * overlayImage.height;
              const ox = (canvas.width - ow) / 2;
              const oy = canvas.height - oh - 50;
              ctx.drawImage(overlayImage, ox, oy, ow, oh);
            }
          }

          const dataUrl = canvas.toDataURL('image/jpeg', 1.0);
          generatedImages.push({ name: `image-${size.width}x${size.height}.jpg`, dataUrl });

          const card = document.createElement('div');
          card.className = 'bg-slate-50 p-3 rounded-lg shadow-sm flex flex-col items-center';
          const img = document.createElement('img');
          img.src = dataUrl;
          img.className = 'w-full rounded-md mb-2';
          const a = document.createElement('a');
          a.href = dataUrl;
          a.download = `image-${size.width}x${size.height}.jpg`;
          a.textContent = 'Download';
          a.className = 'text-blue-600 hover:text-blue-800 text-sm font-medium';
          card.appendChild(img);
          card.appendChild(a);
          imageGrid.appendChild(card);
        }

        loadingSpinner.classList.add('hidden');
        generateBtn.disabled = false;
        generateBtn.textContent = 'Generate Images';

        downloadAllBtn.onclick = () => {
          const zip = new JSZip();
          generatedImages.forEach(img => zip.file(img.name, img.dataUrl.split(',')[1], { base64: true }));
          zip.generateAsync({ type: 'blob' }).then(content => {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(content);
            link.download = 'generated_images.zip';
            link.click();
          });
        };
      });
    });
  </script>
</body>
</html>
